<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Full Screen Binary Counter</title>
  <style>
    :root {
      --bg: #020617;
      --off: #0f172a;
      --on: #22c55e;
      --text: #e5e7eb;
      --gap: 2px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: var(--bg);
      color: var(--text);
      height: 100vh;
      width: 100vw;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    /* === MAIN TITLE === */
    #main-title {
      width: 100%;
      text-align: center;
      font-size: 28px;
      font-weight: 700;
      color: #22c55e;
      margin-top: 4px;
      margin-bottom: 2px;
    }

    /* === CREDIT BOX === */
    #header {
      padding: 0 12px;
      text-align: left;
    }

    #credit-box {
      background: #25FFFF;
      padding: 4px 8px;
      border-radius: 6px;
      border: 3px solid #036B6B;
      display: inline-block;
      font-weight: bold;
      margin-bottom: 4px;
      font-size: 12px;
    }

    #credit-box span {
      letter-spacing: 0;
      font-size: 12px;
      font-weight: bold;
      text-shadow:
        -2px 0 #036B6B,
         2px 0 #036B6B,
         0 -2px #036B6B,
         0  2px #036B6B;
    }

    .credit-normal {
      color: white;
    }

    .credit-eyes {
      color: #FFF700;
    }

    /* === INFO BAR === */
    #info-bar {
      flex: 0 0 auto;
      padding: 4px 8px;
      font-size: 11px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(4px);
      border-bottom: 1px solid #1f2933;
      gap: 12px;
    }

    .toggle-container {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      opacity: 0.85;
    }

    .toggle {
      position: relative;
      width: 40px;
      height: 20px;
      background: #1e293b;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .toggle::after {
      content: "";
      position: absolute;
      top: 2px;
      left: 2px;
      width: 16px;
      height: 16px;
      background: #e5e7eb;
      border-radius: 50%;
      transition: transform 0.2s ease;
    }

    .toggle.active {
      background: #22c55e;
    }

    .toggle.active::after {
      transform: translateX(20px);
      background: #022c22;
    }

    #counter-container {
      flex: 1 1 auto;
      display: grid;
      width: 100vw;
      height: 100vh;
      padding: 4px;
      gap: var(--gap);
    }

    .bit {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 9px;
      border-radius: 2px;
      background: var(--off);
      color: #4b5563;
      transition: background 60ms linear, color 60ms linear, box-shadow 60ms linear;
      user-select: none;
    }

    .bit.on {
      background: var(--on);
      color: #022c22;
      box-shadow: 0 0 8px rgba(34, 197, 94, 0.6);
    }
  </style>
</head>
<body>

  <div id="main-title">Binary Counter</div>

  <div id="header">
    <div id="credit-box">
      <span class="credit-normal">Cl</span><span class="credit-eyes">oud</span><span class="credit-normal">-THE-</span><span class="credit-eyes">Dra</span><span class="credit-normal">gon</span>
    </div>
  </div>

  <div id="info-bar">
    <span id="bit-count-label"></span>
    <span id="value-label"></span>

    <div class="toggle-container">
      <span>Counter</span>
      <div id="modeToggle" class="toggle"></div>
      <span>Binary Time</span>
    </div>

    <div class="toggle-container">
      <span>Sound</span>
      <div id="soundToggle" class="toggle active"></div>
    </div>
  </div>

  <div id="counter-container"></div>

  <script>
    const TARGET_COLUMNS = 60;
    const TARGET_ROWS = 30;
    const TICK_INTERVAL = 1000;
    const RIPPLE_DELAY = 30;
    const RAMP_START = 1.00;
    const RAMP_END = 1.25;

    const container = document.getElementById("counter-container");
    const bitCountLabel = document.getElementById("bit-count-label");
    const valueLabel = document.getElementById("value-label");
    const modeToggle = document.getElementById("modeToggle");
    const soundToggle = document.getElementById("soundToggle");

    let bits = [];
    let bitCount = 0;
    let currentValue = 0n;
    let mode = "counter";
    let soundOn = true;

    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playBlip(rampFactor) {
      if (!soundOn) return;

      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();

      const randomPitch = 0.95 + Math.random() * 0.10;
      const BASE_PITCH = 600;

      osc.frequency.value = BASE_PITCH * randomPitch * rampFactor;

      gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.08);

      osc.connect(gain);
      gain.connect(audioCtx.destination);

      osc.start();
      osc.stop(audioCtx.currentTime + 0.1);
    }

    function setupGrid() {
      const width = window.innerWidth;
      const height = window.innerHeight;

      const columns = Math.max(4, Math.round(TARGET_COLUMNS * (width / 1920)));
      const rows = Math.max(4, Math.round(TARGET_ROWS * (height / 1080)));

      bitCount = columns * rows;

      container.style.gridTemplateColumns = `repeat(${columns}, 1fr)`;
      container.style.gridTemplateRows = `repeat(${rows}, 1fr)`;

      container.innerHTML = "";
      bits = [];

      for (let i = 0; i < bitCount; i++) {
        const div = document.createElement("div");
        div.className = "bit";
        div.textContent = "0";
        container.appendChild(div);
        bits.push(div);
      }

      bitCountLabel.textContent = "";
      currentValue = 0n;
    }

    function getBinaryTimeValue() {
      const now = new Date();
      return BigInt((now.getHours() << 12) | (now.getMinutes() << 6) | now.getSeconds());
    }

    function rippleUpdateBits(valueBigInt) {
      let value = valueBigInt;

      for (let i = 0; i < bitCount; i++) {
        const bitIsOne = (value & 1n) === 1n;
        const el = bits[i];
        const wasOne = el.classList.contains("on");

        const rampFactor = RAMP_START + (i / bitCount) * (RAMP_END - RAMP_START);

        setTimeout(() => {
          if (bitIsOne !== wasOne) playBlip(rampFactor);

          if (bitIsOne) {
            el.classList.add("on");
            el.textContent = "1";
          } else {
            el.classList.remove("on");
            el.textContent = "0";
          }
        }, i * RIPPLE_DELAY);

        value >>= 1n;
      }
    }

    function tick() {
      if (mode === "counter") {
        currentValue = (currentValue + 1n) & ((1n << BigInt(bitCount)) - 1n);
        valueLabel.textContent = "value = " + currentValue.toString();
        rippleUpdateBits(currentValue);
      } else {
        const t = getBinaryTimeValue();
        valueLabel.textContent = "time = " + new Date().toLocaleTimeString();
        rippleUpdateBits(t);
      }
    }

    modeToggle.addEventListener("click", () => {
      modeToggle.classList.toggle("active");
      mode = modeToggle.classList.contains("active") ? "time" : "counter";
    });

    soundToggle.addEventListener("click", () => {
      soundToggle.classList.toggle("active");
      soundOn = soundToggle.classList.contains("active");
    });

    setupGrid();
    tick();
    setInterval(tick, TICK_INTERVAL);
  </script>
</body>
</html>